<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>计算机课堂--js视频解答</title>
<link href="css/miaov.css" rel="stylesheet" />
<script src="js/miaov.js"></script>
<script>
//此例解决：我们发现在整个代码模块中（28～30）、（39～41）、（94～97）三处的代码是一样的，我们可以将其封装成一个函数来使用
window.onload=function (){
	var oDiv=document.getElementById('box');
	var aPicLi=document.getElementById('pic_list').getElementsByTagName('li');
	var aTxtLi=document.getElementById('text_list').getElementsByTagName('li');
	var oIcoUl=document.getElementById('ico_list').getElementsByTagName('ul')[0];
	var aIcoLi=document.getElementById('ico_list').getElementsByTagName('li');
	var oBtnPrev=document.getElementById('btn_prev');
	var oBtnNext=document.getElementById('btn_next');
	var iNow=0;
	var iNowUlLeft=0;

	//01、封装函数
	function fixUlLeft(){
		oBtnPrev.className=iNowUlLeft==0?'btn':'btn showBtn';
		oBtnNext.className=iNowUlLeft==(aIcoLi.length-7)?'btn':'btn showBtn';
		miaovStartMove(oIcoUl, {left: -aIcoLi[0].offsetWidth*iNowUlLeft},MIAOV_MOVE_TYPE.BUFFER);
	}	
	
	//02、主体动作：即小图、大图、文字的统一动作
	function tab(){
		for(i=0;i<aIcoLi.length;i++){
			aIcoLi[i].className='';
			aPicLi[i].style.filter='alpha(opacity:0)';
			aPicLi[i].style.opacity=0;
			miaovStopMove(aPicLi[i]);
			aTxtLi[i].getElementsByTagName('h2')[0].className='';
		}
		aIcoLi[iNow].className='active';
		aTxtLi[iNow].getElementsByTagName('h2')[0].className='show';
		miaovStartMove(aPicLi[iNow], {opacity: 100}, MIAOV_MOVE_TYPE.BUFFER);	
	}	
	
	//03、点击向左的按钮
	oBtnPrev.onclick=function (){
		if(iNowUlLeft>0){
			iNowUlLeft--;
			autoPlay();
		}
	}
	
	//04、点击向右的按钮
	oBtnNext.onclick=function (){
		if(iNowUlLeft<aIcoLi.length-7){
			iNowUlLeft++;
			autoPlay();
		}
	}
	
	//05、点击小图，让大图与文字随着动
	var i=0;
	for(i=0;i<aIcoLi.length;i++){
		aIcoLi[i].index=i;
		aIcoLi[i].onclick=function (){
			if(iNow==this.index){
				return;
			}
			iNow=this.index;						
			tab();
		}
	}
	

	//06、//自动播放
	function autoPlay(){
		iNow++;
			
		if(iNow>=aIcoLi.length){
			iNow=0;
		}
		
		if(iNow<iNowUlLeft){
			iNowUlLeft=iNow;
		} else if(iNow>=iNowUlLeft+7){
			iNowUlLeft=iNow-6;
		}
		
		fixUlLeft();//02、调用函数
		tab();
	}
	
	//07、鼠标移入暂停
	var timer=setInterval(autoPlay, 3000);
	oDiv.onmouseover=function(){
		clearInterval(timer);
	}
	
	//08、鼠标移出开始
	oDiv.onmouseout=function(){
		timer=setInterval(autoPlay, 3000);
	}//oDiv.onmouseout的结束
	
}
</script>
</head>

<body>
<div id="box">
	<ul id="pic_list"><!--大图pic_list -->
		<li style="z-index:2;opacity:1;fliter:alpha(opacity=100);">
        <!--所有图片的透明度为0，只有这里的第一张图片为1即全显示 -->
			<a href="http://www.sina.com.cn"><img src="img/pic_1.jpg" alert="行云课堂_js精品课程"/></a>
		</li>
		<li>
			<a href="http://www.sina.com.cn"><img src="img/pic_2.jpg" alert="行云课堂_js精品课程"/></a>
		</li>
		<li>
			<a href="http://www.sina.com.cn"><img src="img/pic_3.jpg" alert="行云课堂_js精品课程"/></a>
		</li>
		<li>
			<a href="http://www.sina.com.cn"><img src="img/pic_4.jpg" alert="行云课堂_js精品课程"/></a>
		</li>
		<li>
			<a href="http://www.sina.com.cn"><img src="img/pic_5.jpg" alert="行云课堂_js精品课程"/></a>
		</li>
		<li>
			<a href="http://www.sina.com.cn"><img src="img/pic_6.jpg" alert="行云课堂_js精品课程"/></a>
		</li>
		<li>
			<a href="http://www.sina.com.cn"><img src="img/pic_7.jpg" alert="行云课堂_js精品课程"/></a>
		</li>
		<li>
			<a href="http://www.sina.com.cn"><img src="img/pic_8.jpg" alert="行云课堂_js精品课程"/></a>
		</li>
		<li>
			<a href="http://www.sina.com.cn"><img src="img/pic_9.jpg" alert="行云课堂_js精品课程"/></a>
		</li>
		<li>
			<a href="http://www.sina.com.cn"><img src="img/pic_10.jpg" alert="行云课堂_js精品课程"/></a>
		</li>
		<li>
			<a href="http://www.sina.com.cn"><img src="img/pic_11.jpg" alert="行云课堂_js精品课程"/></a>
		</li>
		<li>
			<a href="http://www.sina.com.cn"><img src="img/pic_12.jpg" alert="行云课堂_js精品课程"/></a>
		</li>
		<li>
			<a href="http://www.sina.com.cn"><img src="img/pic_13.jpg" alert="行云课堂_js精品课程"/></a>
		</li>
		<li>
			<a href="http://www.sina.com.cn"><img src="img/pic_14.jpg" alert="行云课堂_js精品课程"/></a>
		</li>
	</ul>
	<div class="mark"></div>

	<ul id="text_list"><!--文字说明text_list -->
		<li><h2 class="show"><a href="#">《武则天秘史》[至22集]姐姐与皇上偷情，媚娘抓奸在床...</a></h2></li>
        <!--所有文字都设置CSS为隐藏，但此处第一张图片的样式了显示 -->
		<li><h2><a href="#">《无底洞》金钱、美女、权利、复仇等欲望让人不可自拔...</a></h2></li>
		<li><h2><a href="#">《巴黎宝贝》邓超巴黎当奶爸，上演基情、卖萌、跨国恋..</a></h2></li>
		<li><h2><a href="#">《我的女儿是花儿》[至3集]“富二代”冰王子恋上贫家女..</a></h2></li>
		<li><h2><a href="#">《法证先锋3》[至26集]写字楼惊现“女僵尸”尸体！</a></h2></li>
		<li><h2><a href="#">《非常了得》孟非郭德纲大曝台下私生活，内地Hold姐来挑战</a></h2></li>
		<li><h2><a href="#">第二届九分钟电影11月20日独家首映 视觉盛宴恭迎各位看官</a></h2></li>
		<li><h2><a href="#">《快女微电影》 洪辰脸伤痊愈 快女微电影收官作复拍</a></h2></li>
		<li><h2><a href="#">《称心如意》京城第一“育婴男”Hold住全场 萝莉热舞走光</a></h2></li>
		<li><h2><a href="#">《男人帮》[全30集]悲喜双响炮，一个完美结局</a></h2></li>
		<li><h2><a href="#">《辛亥革命》成龙、赵文瑄、李冰冰、胡歌演绎革命腥风血雨</a></h2></li>
		<li><h2><a href="#">《李献计历险记》房祖名患差时症为寻女友开启超时空冒险</a></h2></li>
		<li><h2><a href="#">Justin bieber女友动感热单全球首发。</a></h2></li>
		<li><h2><a href="#">第八届中国（重庆）国际园林博览会</a></h2></li>
	</ul>
	<div id="ico_list"><!--小图ico_list -->
		<ul>
			<li class="active"><a href="#"><img src="img/ico_1.jpg" alt="行云课堂富有人性化的IT培训"/></a></li>
            <!--当前点击的小图的CSS样式为active，第一次浏览时，第一张图的CSS样式为active，即前台显示为一个白边框和尖角-->
			<li><a href="#"><img src="img/ico_2.jpg" alt="行云课堂富有人性化的IT培训"/></a></li>
			<li><a href="#"><img src="img/ico_3.jpg" alt="行云课堂富有人性化的IT培训"/></a></li>
			<li><a href="#"><img src="img/ico_4.jpg" alt="行云课堂富有人性化的IT培训"/></a></li>
			<li><a href="#"><img src="img/ico_5.jpg" alt="行云课堂富有人性化的IT培训"/></a></li>
			<li><a href="#"><img src="img/ico_6.jpg" alt="行云课堂富有人性化的IT培训"/></a></li>
			<li><a href="#"><img src="img/ico_7.jpg" alt="行云课堂富有人性化的IT培训"/></a></li>
			<li><a href="#"><img src="img/ico_8.jpg" alt="行云课堂富有人性化的IT培训"/></a></li>
			<li><a href="#"><img src="img/ico_9.jpg" alt="行云课堂富有人性化的IT培训"/></a></li>
			<li><a href="#"><img src="img/ico_10.jpg" alt="行云课堂富有人性化的IT培训"/></a></li>
			<li><a href="#"><img src="img/ico_11.jpg" alt="行云课堂富有人性化的IT培训"/></a></li>
			<li><a href="#"><img src="img/ico_12.jpg" alt="行云课堂富有人性化的IT培训"/></a></li>
			<li><a href="#"><img src="img/ico_13.jpg" alt="行云课堂富有人性化的IT培训"/></a></li>
			<li><a href="#"><img src="img/ico_14.jpg" alt="行云课堂富有人性化的IT培训"/></a></li>
		</ul>
	</div>
	<a href="#" id="btn_prev" class="btn"></a><!--控制向前一张图片的按钮 -->
	<a href="#" id="btn_next" class="btn showBtn"></a><!--控制向后一张图片的按钮 -->
</div>
<h2 style="color:#FFF;">此例中存在的问题。</h2>
</body>
</html>
